## toi18_shopping
[problem statement](https://programming.in.th/tasks/toi18_shopping)

<details>
  <summary>hints</summary>
  <ul>
    <details>
      <summary>hint 1</summary>
      <p>ถ้าคำถามมีแค่ “เราจะเดินไปได้ถึงไหน” ทำอย่างไร?</p>
    </details>
    <details>
      <summary>hint 2</summary>
      <p>ถ้าคำถามมีแค่ “สำหรับช่วง [l,r] มีคะแนนรวมเท่าไหร่” ทำอย่างไร?</p>
    </details>
  </ul>
</details>

<details>
  <summary>prerequisites</summary>
  <ul>
    <li>prefix sum</li>
    <li>binary search</li>
  </ul>
</details>

<details>
  <summary>solution</summary>
  <ul>
  <li>หากเรา brute force ทุกคำถามจะใช้เวลา $O(NM)$ ซึ่งไม่ทันอย่างแน่นอน เราจึงมองปัญหาออกเป็นสองปัญหาคือ 1. “เราจะเดินไปได้ถึงไหน” และ 2. “สำหรับช่วง [l,r] มีคะแนนรวมเท่าไหร่” ทำให้เราสามารถแก้ได้ง่ายขึ้น</li>
    <li>สำหรับปัญหาแรก เราสังเกตได้ว่ายิ่งไปทางขวาค่าใช้จ่ายที่ใช้จะยิ่งสูงขึ้น ทำให้เราสามารถ binary search หาจุดไกลสุดที่เราเดินไปได้ โดยสำหรับแต่ละคำถามบวกเพิ่มเงินตอนต้นและพิจารณาเฉพาะช่องที่เริ่มเดินจนถึงช่องสุดท้าย หาได้ใน $O(logN)$</li>
    <li>สำหรับปัญหาที่สอง เราสามารถเก็บ prefix sum คะแนนได้ คือผลรวมคะแนนตั้งแต่ช่องซ้ายสุดจนถึงทุก ๆ ช่อง หากเราต้องการผลรวมคะแนนช่วง $[l,r]$ เราจะหาได้จาก $pref[r] - pref[l-1]$ หาได้ใน $O(1)$</li>
    <li>เมื่อนำสองปัญหามารวมกัน สำหรับแต่ละคำถามเราก็เพียง binary search หาช่องสุดท้ายที่เราเดินไปได้ และหาผลรวมคะแนนตั้งแต่ช่องเริ่มต้นจนถึงช่องสุดท้ายที่เดินได้ ทำให้ใช้เวลารวม $O(MlogN)$</p>
  </ul>
</details>

[ac code](./toi18_shopping.cpp)
